---
description: 
globs: **/ROADMAP_TASKS.md
alwaysApply: false
---
# Roadmap Task Syntax & Validation Protocol v1.2

## 1. Purpose
This protocol defines the standardized syntax for individual task lines within the `md-docs/ROADMAP_TASKS.md` file. Adherence to this standard ensures consistent parsing, reporting (by `status-check.mdc`), and updating (by `update-memory`, `work-session-management-protocol.mdc`, `testing-verification-protocol.mdc`) across the VeriDX system.

## 2. Standard Task Line Syntax

Each task MUST be represented on a single line using the following Markdown list item format:

```plaintext
- <Emoji> [ PREFIX-Num[.SubNum[.SubSubNum]] ] Description [ Optional Paused Note ] [ Optional Tags ]
```

**Components:**

1.  **`-` (Hyphen & Space):** Standard Markdown list item indicator.
2.  **`<Emoji>` (MUST):** A single status emoji indicating the current state (See Section 3).
3.  **`[ PREFIX-Num[.SubNum[.SubSubNum]] ]` (MUST):** The unique Task Identifier (See Section 4).
4.  **`Description` (MUST):** A concise, human-readable description of the task.
5.  **`[ Optional Paused Note ]` (MAY):** If the task status is Paused (`â¸ï¸`), this MAY contain a brief note indicating the reason and timestamp, e.g., `[ Paused: SWS - 07.27.24 | 10:30 AM PDT ]`.
6.  **`[ Optional Tags ]` (MAY):** Zero or more metadata tags providing additional context (See Section 5).

## 3. Status Emojis (MUST)

The following emojis MUST be used to represent task status:

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Emoji       â”‚ Status             â”‚ Typical Meaning            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â³           â”‚ PENDING            â”‚ Not started                â”‚
â”‚ ğŸ”„           â”‚ ACTIVE             â”‚ In progress                â”‚
â”‚ â¸ï¸           â”‚ PAUSED             â”‚ Paused via SWS             â”‚
â”‚ ğŸ”¬           â”‚ PENDING_TESTING    â”‚ Ready for testing (via EWS)â”‚
â”‚ ğŸ§ª           â”‚ TESTING            â”‚ Actively being tested      â”‚
â”‚ âœ…           â”‚ COMPLETED          â”‚ Done and verified (via AC) â”‚
â”‚ âŒ           â”‚ BLOCKED            â”‚ Blocked by an Error entity â”‚
â”‚ ğŸ”§           â”‚ REWORK             â”‚ Rejected (via RC), needs fix â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
*(Note: `REWORK` (`ğŸ”§`) is an optional status, often represented as returning to `ACTIVE` (`ğŸ”„`).)*

## 4. Task Identifier Syntax (`[ PREFIX-Num[.SubNum[.SubSubNum]] ]`) (MUST)

Each task MUST have a unique identifier enclosed in square brackets with a space before & after TASK-ID (`[]`).

- **Hierarchical IDs:** To represent parent/child relationships, use dot notation up to a maximum depth of 3:
  - `[ PREFIX-Num ]` (parent)
  - `[ PREFIX-Num.SubNum ]` (child)
  - `[ PREFIX-Num.SubNum.SubSubNum ]` (grandchild)
  - **Maximum depth:** 3 (e.g., `[ INFRA-4.1.2 ]` is valid; `[ INFRA-4.1.2.3 ]` is NOT valid)
- **Num/SubNum/SubSubNum:** Each segment MUST be a sequential integer (e.g., `1`, `2`, `3`, ...).
- **Prefix:**
    - MUST be 3-6 characters long.
    - MUST be uppercase alphanumeric (`A-Z`, `0-9`).
    - SHOULD indicate the primary category or feature area.
    - **Recommended Prefixes:** `AUTH`, `UI`, `CORE`, `WIDGET`, `PWA`, `BUG`, `REFACTOR`, `DOCS`, `TEST`, `DB`, `INFRA`, `A11Y`  (prefixes derived from `task-ranking-table-reference-and-table.mdc`).
- **Uniqueness:** The full hierarchical ID (including all segments) MUST be unique within the roadmap.
- **Spacing:** There MUST be a space before and after the ID inside the brackets: `[ PREFIX-Num ]`, `[ PREFIX-Num.SubNum ]`, etc.

**Valid Examples:**
```markdown
- ğŸ”„ [ UI-3 ] Implement user preferences
- ğŸ”„ [ UI-3.1 ] Add theme toggle
- ğŸ”„ [ UI-3.2 ] Add notification settings
- ğŸ”„ [ UI-3.2.1 ] Implement email notification toggle
- âœ… [ INFRA-4 ] Resolve Vite server issues â€¢ [ done:03.29.25 ]
  - âœ… [ INFRA-4.1 ] Fix dependency conflicts â€¢ [ done:04.23.25 ]
  - âœ… [ INFRA-4.2 ] Update configuration â€¢ [ done:04.23.25 ]
- ğŸ”„ [ AUTH-2.1.1 ] Add multi-factor authentication
```

**Invalid Examples:**
```markdown
- ğŸ”„ [ UI-3.2.1.1 ] Too deep (depth 4, max is 3)
- ğŸ”„ [ UI-3-2 ] Hyphen used for hierarchy (must use dot)
- ğŸ”„ [ UI-3.01 ] Leading zero in subtask (must be integer)
- ğŸ”„ [ UI3.2 ] Missing hyphen after prefix
- ğŸ”„ [ UI-3.2a ] Non-integer subtask
```

**Validation Regex (max depth 3):**
```regex
\[ [A-Z0-9]{3,6}-\d+(?:\.\d+){0,2} \]
```

## 5. Metadata Tag Syntax (` â€¢ [ key:value ]`) (MAY)

Optional metadata can be appended to the task line using one or more tags.

*   **Format:** Each tag MUST follow the format ` â€¢ [ key:value ]`.
    *   Starts with ` â€¢ ` (Space, Bullet, Space).
    *   Enclosed in square brackets `[]`.
    *   Contains a `key`, followed by a colon `:`, followed by a `value`.
    *   No Spaces permitted around the colon.
    *   Each key:value pair enclosed by brackets must be preceeded & proceeded by a space `[ key:value ]`
*   **Multiple Tags:** Multiple tags can be added sequentially (e.g., ` â€¢ [ key1:value1 ] â€¢ [ key2:value2 ]`).
*   **Allowed Keys & Value Formats:**
    *   `rnk`: Task rank/priority (e.g., `A`, `B`, `C`). Used by WSMP RWS logic.
    *   `due`: Due date in `MM.DD.YY` format (e.g., `12.31.24`).
    *   `done`: **MUST be present for completed (`âœ…`) tasks.** Value MUST be the completion date in `MM.DD.YY` format (e.g., `07.27.24`). This tag is added by the `update-memory` or equivalent completion logic.
    *   *(Future)* `effort`: Estimated effort (e.g., `S`, `M`, `L`).
    *   *(Future)* `assignee`: Assigned user/agent initials (e.g., `VS`, `AI`).
    *   *(Future)* `epic`: Link to a parent Epic or larger feature ID.
    *   Other specific keys MAY be introduced via protocol updates.
*   **Parsing:** Protocols interacting with the roadmap MUST be capable of parsing these tags. Unknown keys SHOULD be ignored gracefully during parsing but MAY trigger warnings.

## 6. Examples

```markdown
# Valid Task Lines:
- â³ [ UI-1 ] Implement login form styling
- ğŸ”„ [ CORE-5 ] Refactor database connection pooling â€¢ [ rnk:A ]
- â¸ï¸ [ AUTH-2 ] Integrate multi-factor authentication [ Paused: SWS - 07.26.24 | 04:15 PM PDT ] â€¢ [ rnk:B ] â€¢ [ due:08.15.24 ]
- ğŸ”¬ [ UI-3 ] Add accessibility features to dropdown component â€¢ [ rnk:A ]
- âœ… [ DOCS-1 ] Update installation guide â€¢ [ done:07.25.24 ]
- ğŸ”„ [ UI-3.1 ] Add theme toggle
- ğŸ”„ [ UI-3.2.1 ] Implement email notification toggle
```

# Invalid Task Lines:
- Missing Emoji [ CORE-1 ] Task description
- â³ Missing ID Task description
- ğŸ”„ [ UI-4 ] Task description â€¢ rnk:C  # Incorrect tag format
- âœ… [ BUG-2 ] Fix button alignment # Missing required done:MM.DD.YY tag
- â³ [ TEST-5 ] Write unit tests due:09.01.24 # Incorrect tag format
- âœ… [TEST-7] Run End to End Tests due:07.07.25 # Incorrect ID spacing format, missing (space, id, space)
- ğŸ”„ [ UI-3.2.1.1 ] Too deep (depth 4, max is 3)
- ğŸ”„ [ UI-3-2 ] Hyphen used for hierarchy (must use dot)
- ğŸ”„ [ UI-3.01 ] Leading zero in subtask (must be integer)
- ğŸ”„ [ UI3.2 ] Missing hyphen after prefix
- ğŸ”„ [ UI-3.2a ] Non-integer subtask
```

## 7. Validation & Enforcement

-   The `generate-todotxt.js` script SHOULD include validation checks for this syntax and warn about non-compliant lines.
-   Protocols (`status-check`, `update-memory`, `WSMP`) reading or writing to `ROADMAP_TASKS.md` MUST adhere to this syntax for reliable operation.
-   Linters or custom scripts MAY be developed for stricter enforcement.

## 8. Related Protocols

-   `generate-todotxt.js`: Consumes this format.
-   `status-check.mdc`: Parses this format for reporting.
-   `update-memory`: Writes completion status (`âœ…`, ` â€¢ [ done:MM.DD.YY ]`) in this format.
-   `work-session-management-protocol.mdc`: Reads status (`â¸ï¸`, `ğŸ§ª`, `ğŸ”„`, `â³`, `âŒ`) and rank (`rnk`) in this format.
-   `testing-verification-protocol.mdc`: Reads/writes status (`ğŸ”¬`, `ğŸ§ª`, `âœ…`, `ğŸ”„`) in this format.
-   `task-ranking-table-reference-and-table.mdc`: standardized task prefixes derived from here. 
```